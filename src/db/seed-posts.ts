
const dotenv = require('dotenv')
dotenv.config({ path: '.env.local' })

if (!process.env.DATABASE_URL) {
    console.error('‚ùå DATABASE_URL not found in .env.local')
    process.exit(1)
}

const { db } = require('./index')
const { posts: postsTable } = require('./schema')
const { randomUUID } = require('crypto')

async function seed() {
    console.log('üå± Seeding 25 mock posts...')

    const mockPosts = [
        // CATEGORY: C√¥ng ty
        { id: randomUUID(), title: 'Siphonet k·ª∑ ni·ªám 15 nƒÉm h√¨nh th√†nh v√† ph√°t tri·ªÉn', slug: 'k·ª∑-ni·ªám-15-nƒÉm-th√†nh-l·∫≠p', excerpt: 'H√†nh tr√¨nh 15 nƒÉm d·∫´n ƒë·∫ßu lƒ©nh v·ª±c c∆° ƒëi·ªán v√† x·ª≠ l√Ω n∆∞·ªõc.', content: '<h1>H√†nh tr√¨nh 15 nƒÉm ƒë·∫ßy t·ª± h√†o</h1><p>C√¥ng ty Siphonet v·ª´a t·ªï ch·ª©c l·ªÖ k·ª∑ ni·ªám 15 nƒÉm.</p>', category: 'C√¥ng ty', featuredImageUrl: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?q=80&w=1200', author: 'Siphonet Admin', status: 'published', publishedDate: new Date('2024-01-15'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'B√†n giao h·ªá th·ªëng x·ª≠ l√Ω n∆∞·ªõc th·∫£i KCN Quang Ch√¢u', slug: 'ban-giao-he-thong-quang-chau', excerpt: 'D·ª± √°n c√¥ng su·∫•t 5000m3/ng√†y ƒë√™m ƒë√£ ƒëi v√†o ho·∫°t ƒë·ªông.', content: '<h1>D·ª± √°n tr·ªçng ƒëi·ªÉm t·∫°i B·∫Øc Giang</h1>', category: 'C√¥ng ty', featuredImageUrl: 'https://images.unsplash.com/photo-1541888941255-081bbad96c30?q=80&w=1200', author: 'Siphonet Admin', status: 'published', publishedDate: new Date('2024-02-10'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Teambuilding 2024: "K·∫øt s·ª©c m·∫°nh - N·ªëi th√†nh c√¥ng"', slug: 'teambuilding-2024', excerpt: 'Chuy·∫øn ƒëi g·∫Øn k·∫øt ƒë·∫°i gia ƒë√¨nh Siphonet t·∫°i ƒê√† N·∫µng.', content: '<p>Ho·∫°t ƒë·ªông teambuilding h√†ng nƒÉm.</p>', category: 'C√¥ng ty', featuredImageUrl: 'https://images.unsplash.com/photo-1528605248644-14dd04022da1?q=80&w=1200', author: 'Siphonet Admin', status: 'published', publishedDate: new Date('2024-03-20'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Siphonet nh·∫≠n gi·∫£i Doanh nghi·ªáp C∆° ƒëi·ªán ti√™u bi·ªÉu', slug: 'giai-thuong-co-dien-tieu-bieu', excerpt: 'S·ª± ghi nh·∫≠n cho n·ªó l·ª±c c·∫£i ti·∫øn ch·∫•t l∆∞·ª£ng d·ªãch v·ª•.', content: '<p>Gi·∫£i th∆∞·ªüng do Hi·ªáp h·ªôi C∆° ƒëi·ªán trao t·∫∑ng.</p>', category: 'C√¥ng ty', featuredImageUrl: 'https://images.unsplash.com/photo-1567427017947-545c5f8d16ad?q=80&w=1200', author: 'Siphonet Admin', status: 'published', publishedDate: new Date('2023-12-25'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Khai tr∆∞∆°ng vƒÉn ph√≤ng ƒë·∫°i di·ªán t·∫°i TP. H·ªì Ch√≠ Minh', slug: 'khai-truong-chi-nhanh-hcm', excerpt: 'M·ªü r·ªông quy m√¥ ph·ª•c v·ª• kh√°ch h√†ng Mi·ªÅn Nam.', content: '<p>VƒÉn ph√≤ng m·ªõi t·∫°i Qu·∫≠n 1.</p>', category: 'C√¥ng ty', featuredImageUrl: 'https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=1200', author: 'Siphonet Admin', status: 'published', publishedDate: new Date('2024-04-05'), createdAt: new Date(), updatedAt: new Date() },

        // CATEGORY: Tuy·ªÉn d·ª•ng
        { id: randomUUID(), title: 'Tuy·ªÉn K·ªπ s∆∞ Thi·∫øt k·∫ø M&E (ƒêi·ªán/N∆∞·ªõc)', slug: 'tuyen-ky-su-me', excerpt: 'Gia nh·∫≠p ƒë·ªôi ng≈© t√†i nƒÉng v·ªõi ph√∫c l·ª£i h·∫•p d·∫´n.', content: '<h3>M√¥ t·∫£ c√¥ng vi·ªác</h3>', category: 'Tuy·ªÉn d·ª•ng', featuredImageUrl: 'https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?q=80&w=1200', author: 'HR Dept', status: 'published', publishedDate: new Date('2024-05-01'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Tuy·ªÉn K·ªπ thu·∫≠t vi√™n V·∫≠n h√†nh Tr·∫°m n∆∞·ªõc', slug: 'tuyen-ktv-van-hanh', excerpt: 'L√†m vi·ªác tr·ª±c ti·∫øp v·ªõi h·ªá th·ªëng x·ª≠ l√Ω n∆∞·ªõc hi·ªán ƒë·∫°i.', content: '<p>Y√™u c·∫ßu chuy√™n ng√†nh m√¥i tr∆∞·ªùng.</p>', category: 'Tuy·ªÉn d·ª•ng', featuredImageUrl: 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?q=80&w=1200', author: 'HR Dept', status: 'published', publishedDate: new Date('2024-05-02'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Tuy·ªÉn Nh√¢n vi√™n Kinh doanh D·ª± √°n B2B', slug: 'tuyen-sales-du-an', excerpt: 'Thu nh·∫≠p h·∫•p d·∫´n d√†nh cho ng∆∞·ªùi am hi·ªÉu k·ªπ thu·∫≠t.', content: '<p>ƒêam m√™ kinh doanh, am hi·ªÉu s·∫£n ph·∫©m.</p>', category: 'Tuy·ªÉn d·ª•ng', featuredImageUrl: 'https://images.unsplash.com/photo-1521737711867-e3b97375f902?q=80&w=1200', author: 'HR Dept', status: 'published', publishedDate: new Date('2024-05-03'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Ch∆∞∆°ng tr√¨nh Th·ª±c t·∫≠p sinh NextGen 2024', slug: 'thuc-tap-sinh-2024', excerpt: 'M√¥i tr∆∞·ªùng th·ª±c chi·∫øn cho sinh vi√™n kh·ªëi k·ªπ thu·∫≠t.', content: '<p>C∆° h·ªôi tr·ªü th√†nh nh√¢n vi√™n ch√≠nh th·ª©c.</p>', category: 'Tuy·ªÉn d·ª•ng', featuredImageUrl: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?q=80&w=1200', author: 'HR Dept', status: 'published', publishedDate: new Date('2024-05-04'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Tuy·ªÉn Tr∆∞·ªüng ph√≤ng D·ª± √°n M&E', slug: 'tuyen-tp-du-an', excerpt: 'V·ªã tr√≠ l√£nh ƒë·∫°o then ch·ªët cho qu·∫£n l√Ω d√†y d·∫°n.', content: '<p>Qu·∫£n l√Ω c√°c t·ªïng th·∫ßu l·ªõn.</p>', category: 'Tuy·ªÉn d·ª•ng', featuredImageUrl: 'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?q=80&w=1200', author: 'HR Dept', status: 'published', publishedDate: new Date('2024-05-05'), createdAt: new Date(), updatedAt: new Date() },

        // CATEGORY: C√¥ng ngh·ªá
        { id: randomUUID(), title: 'Gi·∫£i ph√°p ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng HVAC', slug: 'tiet-kiem-nang-luong-hvac', excerpt: '·ª®ng d·ª•ng bi·∫øn t·∫ßn th√¥ng minh gi·∫£m 30% ƒëi·ªán nƒÉng.', content: '<p>T·ªëi ∆∞u chiller theo t·∫£i th·ª±c t·∫ø.</p>', category: 'C√¥ng ngh·ªá', featuredImageUrl: 'https://images.unsplash.com/photo-1558389186-438424b00a32?q=80&w=1200', author: 'Tech Lab', status: 'published', publishedDate: new Date('2024-04-15'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'C√¥ng ngh·ªá l·ªçc m√†ng UF t√°i s·ª≠ d·ª•ng n∆∞·ªõc', slug: 'cong-nghe-uf-tai-su-dung', excerpt: 'N∆∞·ªõc ƒë·∫°t chu·∫©n t∆∞·ªõi c√¢y v√† l√†m m√°t c√¥ng nghi·ªáp.', content: '<p>Lo·∫°i b·ªè vi khu·∫©n b·∫±ng l·ªçc m√†ng UF.</p>', category: 'C√¥ng ngh·ªá', featuredImageUrl: 'https://images.unsplash.com/photo-1584622781564-1d9876a13d01?q=80&w=1200', author: 'Tech Lab', status: 'published', publishedDate: new Date('2024-04-16'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'H·ªá th·ªëng Smart Water Management 4.0', slug: 'smart-water-4-0', excerpt: 'Gi√°m s√°t l∆∞u l∆∞·ª£ng, ch·∫•t l∆∞·ª£ng n∆∞·ªõc qua App.', content: '<p>T√≠ch h·ª£p IoT gi√°m s√°t th·ªùi gian th·ª±c.</p>', category: 'C√¥ng ngh·ªá', featuredImageUrl: 'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1200', author: 'Tech Lab', status: 'published', publishedDate: new Date('2024-04-17'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'T·ª± ƒë·ªông h√≥a tr·∫°m b∆°m c·∫•p n∆∞·ªõc ƒë√¥ th·ªã', slug: 'tu-dong-hoa-tram-bom', excerpt: 'N√¢ng cao ƒë·ªô an to√†n cho h·∫° t·∫ßng ƒë√¥ th·ªã.', content: '<p>T√≠ch h·ª£p SCADA v·∫≠n h√†nh t·ª± ƒë·ªông.</p>', category: 'C√¥ng ngh·ªá', featuredImageUrl: 'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=1200', author: 'Tech Lab', status: 'published', publishedDate: new Date('2024-04-18'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'V·∫≠t li·ªáu composite cho b·ªìn l·ªçc √°p l·ª±c', slug: 'v√¢t-lieu-composite-bon-loc', excerpt: 'Tr·ªçng l∆∞·ª£ng nh·∫π, ch·ªëng ƒÉn m√≤n h√≥a ch·∫•t c·ª±c t·ªët.', content: '<p>·ª®ng d·ª•ng s·ª£i th·ªßy tinh cao c·∫•p.</p>', category: 'C√¥ng ngh·ªá', featuredImageUrl: 'https://images.unsplash.com/photo-1535813543269-7328ad13954f?q=80&w=1200', author: 'Tech Lab', status: 'published', publishedDate: new Date('2024-04-19'), createdAt: new Date(), updatedAt: new Date() },

        // CATEGORY: Chuy√™n ng√†nh
        { id: randomUUID(), title: 'C·∫≠p nh·∫≠t ti√™u chu·∫©n PCCC nƒÉm 2024', slug: 'tieu-chuan-pccc-2024', excerpt: 'Nh·ªØng thay ƒë·ªïi quan tr·ªçng ch·ªß ƒë·∫ßu t∆∞ c·∫ßn l∆∞u √Ω.', content: '<p>Ngh·ªã ƒë·ªãnh 50 m·ªõi b·ªï sung y√™u c·∫ßu k·ªπ thu·∫≠t.</p>', category: 'Chuy√™n ng√†nh', featuredImageUrl: 'https://images.unsplash.com/photo-1516567727245-ad8c68f3ec93?q=80&w=1200', author: 'Engineering', status: 'published', publishedDate: new Date('2024-05-10'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Quy tr√¨nh b·∫£o tr√¨ Chiller gi·∫£i nhi·ªát n∆∞·ªõc', slug: 'bao-tri-chiller-dinh-ky', excerpt: 'H∆∞·ªõng d·∫´n c√°c b∆∞·ªõc ki·ªÉm tra m√°y n√©n, b√¨nh ng∆∞ng.', content: '<p>B·∫£o tr√¨ gi√∫p k√©o d√†i tu·ªïi th·ªç thi·∫øt b·ªã.</p>', category: 'Chuy√™n ng√†nh', featuredImageUrl: 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?q=80&w=1200', author: 'Engineering', status: 'published', publishedDate: new Date('2024-05-11'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Ph√¢n t√≠ch ch·ªâ s·ªë BOD, COD trong n∆∞·ªõc th·∫£i', slug: 'phan-tich-chi-so-bod-cod', excerpt: 'Hi·ªÉu c√°c th√¥ng s·ªë ƒë·ªÉ ch·ªçn ph∆∞∆°ng √°n x·ª≠ l√Ω.', content: '<p>M·ª©c ƒë·ªô √¥ nhi·ªÖm h·ªØu c∆° v√† c√°ch x·ª≠ l√Ω.</p>', category: 'Chuy√™n ng√†nh', featuredImageUrl: 'https://images.unsplash.com/photo-1543286386-713bcd534a70?q=80&w=1200', author: 'Engineering', status: 'published', publishedDate: new Date('2024-05-12'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'T√≠nh to√°n ·ªëng n∆∞·ªõc ti√™u chu·∫©n TCVN', slug: 'tinh-toan-ong-nuoc-tcvn', excerpt: 'C√¥ng th·ª©c tra c·ª©u th·ªßy l·ª±c ph·ª•c v·ª• thi·∫øt k·∫ø.', content: '<p>H∆∞·ªõng d·∫´n x√°c ƒë·ªãnh l∆∞u l∆∞·ª£ng t√≠nh to√°n.</p>', category: 'Chuy√™n ng√†nh', featuredImageUrl: 'https://images.unsplash.com/photo-1503694978374-8a2fa686963a?q=80&w=1200', author: 'Engineering', status: 'published', publishedDate: new Date('2024-05-13'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Gi·∫£i ph√°p ch·ªëng rung m√°y b∆°m c√¥ng su·∫•t l·ªõn', slug: 'chong-rung-may-bom', excerpt: 'S·ª≠ d·ª•ng l√≤ xo gi·∫£m ch·∫•n b·∫£o v·ªá ƒë∆∞·ªùng ·ªëng.', content: '<p>X·ª≠ l√Ω rung ƒë·ªông b·∫±ng kh·ªõp n·ªëi m·ªÅm.</p>', category: 'Chuy√™n ng√†nh', featuredImageUrl: 'https://images.unsplash.com/photo-1517646272422-b28618214295?q=80&w=1200', author: 'Engineering', status: 'published', publishedDate: new Date('2024-05-14'), createdAt: new Date(), updatedAt: new Date() },

        // CATEGORY: X√£ h·ªôi
        { id: randomUUID(), title: 'Siphonet l√†m s·∫°ch s√¥ng H·ªìng v√¨ m√¥i tr∆∞·ªùng', slug: 'lam-sach-song-hong', excerpt: '100 nh√¢n vi√™n tham gia thu gom r√°c th·∫£i nh·ª±a.', content: '<p>V√¨ h√†nh tinh xanh, n√¢ng cao nh·∫≠n th·ª©c.</p>', category: 'X√£ h·ªôi', featuredImageUrl: 'https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?q=80&w=1200', author: 'Social', status: 'published', publishedDate: new Date('2024-06-01'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'M·∫πo ti·∫øt ki·ªám n∆∞·ªõc sinh ho·∫°t h√†ng ng√†y', slug: 'tiet-kiem-nuoc-sinh-hoat', excerpt: 'Th√≥i quen nh·ªè gi√∫p ti·∫øt ki·ªám h√†ng ng√†n l√≠t n∆∞·ªõc.', content: '<p>T√°i s·ª≠ d·ª•ng n∆∞·ªõc, thi·∫øt b·ªã v·ªá sinh th√¥ng minh.</p>', category: 'X√£ h·ªôi', featuredImageUrl: 'https://images.unsplash.com/photo-1595467793069-1aecc2cc6759?q=80&w=1200', author: 'Social', status: 'published', publishedDate: new Date('2024-06-02'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Ng√†y h·ªôi Hi·∫øn m√°u "Gi·ªçt h·ªìng Siphonet"', slug: 'hien-mau-siphonet', excerpt: 'Lan t·ªèa y√™u th∆∞∆°ng v√† tr√°ch nhi·ªám c·ªông ƒë·ªìng.', content: '<p>Ph·ªëi h·ª£p Vi·ªán Huy·∫øt h·ªçc Trung ∆∞∆°ng.</p>', category: 'X√£ h·ªôi', featuredImageUrl: 'https://images.unsplash.com/photo-1615461066841-6116ecaabb04?q=80&w=1200', author: 'Social', status: 'published', publishedDate: new Date('2024-06-03'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'Trao h·ªçc b·ªïng cho sinh vi√™n ngh√®o v∆∞·ª£t kh√≥', slug: 'hoc-bong-sinh-vien', excerpt: 'H·ªó tr·ª£ t√†i nƒÉng tr·∫ª ng√†nh k·ªπ thu·∫≠t m√¥i tr∆∞·ªùng.', content: '<p>10 su·∫•t h·ªçc b·ªïng tr·ªã gi√° 50 tri·ªáu ƒë·ªìng.</p>', category: 'X√£ h·ªôi', featuredImageUrl: 'https://images.unsplash.com/photo-1523240795612-9a054b0db644?q=80&w=1200', author: 'Social', status: 'published', publishedDate: new Date('2024-06-04'), createdAt: new Date(), updatedAt: new Date() },
        { id: randomUUID(), title: 'T√†i tr·ª£ h·ªá th·ªëng l·ªçc n∆∞·ªõc RO v√πng cao', slug: 'loc-nuoc-ro-vung-cao', excerpt: 'Mang ngu·ªìn n∆∞·ªõc s·∫°ch ƒë·∫øn th·∫ßy tr√≤ H√† Giang.', content: '<p>D·ª± √°n thi·ªán nguy·ªán t·∫°i tr∆∞·ªùng ti·ªÉu h·ªçc.</p>', category: 'X√£ h·ªôi', featuredImageUrl: 'https://images.unsplash.com/photo-1518398046578-8cca57732e17?q=80&w=1200', author: 'Social', status: 'published', publishedDate: new Date('2024-06-05'), createdAt: new Date(), updatedAt: new Date() }
    ]

    try {
        console.log('üîÑ Executing bulk upsert...')
        await db.insert(postsTable).values(mockPosts).onConflictDoUpdate({
            target: postsTable.slug,
            set: { updatedAt: new Date() } // Just update updatedAt to trigger conflict handle correctly for existing
        }).execute()

        console.log('‚úÖ Seeding completed successfully!')
        process.exit(0)
    } catch (error) {
        console.error('‚ùå Seeding failed:', error)
        process.exit(1)
    }
}

seed()
